# 如何更新部署到 Vercel

## 第一次部署

### 步骤 1: 代码已推送到 GitHub ✅

你的GitHub仓库：`https://github.com/singworld/yywxd`

代码已经是最新的，包含：
- ✅ 优化后的记忆口诀系统
- ✅ Vercel配置文件（vercel.json）
- ✅ 多选题支持
- ✅ 完整的1282道题库

### 步骤 2: 在 Vercel 导入项目

#### 2.1 访问 Vercel
打开浏览器，访问：https://vercel.com

#### 2.2 登录/注册
- 如果没有账号，点击 "Sign Up" 注册
- **推荐使用 GitHub 账号登录**（这样可以直接访问你的仓库）

#### 2.3 导入项目
1. 登录后，点击右上角 **"Add New..."**
2. 选择 **"Project"**
3. 你会看到 "Import Git Repository" 页面
4. 找到 **"singworld/yywxd"** 仓库
5. 点击右侧的 **"Import"** 按钮

#### 2.4 配置项目（无需修改）
Vercel会自动检测到这是Vite项目，显示：

```
Framework Preset: Vite
Build Command: pnpm run build
Output Directory: dist
Install Command: pnpm install
```

**这些都是正确的，不需要修改任何配置！**

#### 2.5 部署
直接点击底部的 **"Deploy"** 按钮

#### 2.6 等待部署完成
- 大约2-3分钟
- 你可以看到实时的构建日志
- 部署成功后会显示：🎉 Congratulations!

#### 2.7 访问你的网站
部署成功后，Vercel会提供一个URL：
```
https://yywxd.vercel.app
```
或类似的域名。点击访问即可！

---

## 后续更新部署（自动）

一旦完成第一次部署，后续更新就**完全自动化**了！

### 自动部署流程

```
本地修改代码 → git push → Vercel自动部署 → 网站自动更新
```

### 具体步骤

#### 1. 修改代码
在本地修改任何文件，比如：
- 更新题库（替换CSV文件）
- 优化记忆口诀
- 修改界面样式
- 修复bug

#### 2. 提交并推送到GitHub
```bash
# 查看修改
git status

# 添加所有修改
git add .

# 提交修改
git commit -m "更新题库" # 或其他描述

# 推送到GitHub
git push origin master
```

#### 3. 等待自动部署
- Vercel会自动检测到GitHub的push
- 自动开始构建
- 自动部署到生产环境
- **你不需要做任何操作！**

#### 4. 查看部署状态
访问 Vercel Dashboard：
- https://vercel.com/dashboard
- 点击你的项目
- 可以看到部署历史和状态

---

## 查看部署详情

### 在 Vercel Dashboard

1. 访问：https://vercel.com
2. 登录后点击你的项目 **"yywxd"**
3. 你会看到：
   - **Deployments** - 所有部署历史
   - **Settings** - 项目设置
   - **Domains** - 域名管理
   - **Analytics** - 访问统计（可选）

### 部署信息

每次部署会显示：
- ✅ 部署状态（Building / Ready / Error）
- 🌐 预览URL
- ⏱️ 构建时间
- 📝 Git提交信息
- 📊 构建日志

---

## 常见更新场景

### 场景 1: 更新题库

```bash
# 1. 替换CSV文件
cp 新题库.csv public/C类题库_extracted.csv

# 2. 提交推送
git add public/C类题库_extracted.csv
git commit -m "更新题库到最新版本"
git push origin master

# 3. Vercel自动部署（2-3分钟后生效）
```

### 场景 2: 修改记忆口诀

```bash
# 1. 编辑文件
# 修改 src/services/memoryAidsContentBased.ts

# 2. 提交推送
git add src/services/memoryAidsContentBased.ts
git commit -m "优化记忆口诀"
git push origin master

# 3. Vercel自动部署
```

### 场景 3: 修改界面

```bash
# 1. 修改Vue组件
# 比如 src/pages/StudyPage.vue

# 2. 本地测试
pnpm dev

# 3. 提交推送
git add .
git commit -m "优化学习界面"
git push origin master

# 4. Vercel自动部署
```

---

## 分支部署（可选）

### 主分支（master）→ 生产环境
```bash
git push origin master
# 自动部署到：https://yywxd.vercel.app
```

### 其他分支 → 预览环境
```bash
# 创建测试分支
git checkout -b test-feature

# 推送测试分支
git push origin test-feature

# Vercel会自动创建预览URL，如：
# https://yywxd-git-test-feature-singworld.vercel.app
```

这样可以先测试新功能，确认没问题后再合并到master。

---

## 回滚到之前的版本

如果新部署有问题，可以快速回滚：

### 方法 1: 在 Vercel Dashboard
1. 进入项目的 Deployments 页面
2. 找到之前的成功部署
3. 点击右侧的 **"..."** → **"Promote to Production"**
4. 立即回滚到该版本

### 方法 2: 使用 Git
```bash
# 查看提交历史
git log --oneline

# 回退到之前的版本
git revert HEAD  # 撤销最后一次提交

# 推送
git push origin master

# Vercel自动部署回滚后的版本
```

---

## 自定义域名（可选）

如果你有自己的域名（如 exam.example.com）：

### 步骤：
1. 进入 Vercel 项目设置
2. 点击 **"Domains"**
3. 输入你的域名
4. 按照提示配置DNS记录：
   ```
   类型: CNAME
   名称: exam（或 @）
   值: cname.vercel-dns.com
   ```
5. 等待DNS生效（几分钟到几小时）

---

## 环境变量（本项目不需要）

这个项目是纯静态的，不需要环境变量。

如果将来需要添加：
1. Vercel Dashboard → 项目设置
2. 点击 **"Environment Variables"**
3. 添加变量（必须以 `VITE_` 开头）
4. 重新部署

---

## 监控和分析（可选）

### Vercel Analytics
可以查看：
- 访问量统计
- 页面性能
- 用户地理位置

开启方法：
1. 项目设置 → Analytics
2. 点击 Enable
3. 查看统计数据

### Vercel Speed Insights
可以查看：
- 页面加载速度
- 性能评分
- 优化建议

---

## 故障排查

### 问题 1: 部署失败

**查看方法**：
1. Vercel Dashboard → Deployments
2. 点击失败的部署
3. 查看 **Build Logs**

**常见原因**：
- 构建命令错误（已配置正确）
- 依赖安装失败
- 代码语法错误

**解决**：
```bash
# 本地测试构建
pnpm build

# 如果本地成功，查看Vercel日志
```

### 问题 2: 网站打开白屏

**原因**：路由配置问题

**已解决**：vercel.json已配置rewrites

### 问题 3: CSV文件加载失败

**检查**：
```bash
# 确认文件存在
ls -la public/C类题库_extracted.csv

# 重新构建
pnpm build

# 检查dist目录
ls -la dist/C类题库_extracted.csv
```

---

## 完整更新流程示例

```bash
# ===== 1. 本地修改 =====
# 比如修改了记忆口诀

# ===== 2. 本地测试 =====
pnpm dev
# 在浏览器测试功能是否正常

# ===== 3. 提交代码 =====
git status
git add .
git commit -m "优化记忆口诀，使其更简洁易记"

# ===== 4. 推送到GitHub =====
git push origin master

# ===== 5. 等待自动部署 =====
# 访问 https://vercel.com/dashboard
# 查看部署进度

# ===== 6. 验证线上效果 =====
# 访问 https://yywxd.vercel.app
# 测试新功能
```

---

## 快速命令参考

```bash
# 查看状态
git status

# 提交所有修改
git add .
git commit -m "描述修改内容"

# 推送触发部署
git push origin master

# 本地开发
pnpm dev

# 本地构建测试
pnpm build

# 预览构建结果
pnpm preview
```

---

## 总结

### 第一次部署
1. ✅ 代码已在GitHub（https://github.com/singworld/yywxd）
2. 访问 vercel.com
3. 导入项目
4. 点击Deploy
5. 完成！

### 后续更新
```bash
git add .
git commit -m "更新说明"
git push origin master
```
**就这么简单！Vercel会自动检测并部署。**

### 部署时间
- 构建：2-3分钟
- 全球CDN分发：立即生效

### 自动化
- ✅ Git push自动触发部署
- ✅ 自动构建
- ✅ 自动分发到全球CDN
- ✅ 自动HTTPS
- ✅ 自动缓存优化

**你只需要关注代码，其他都交给Vercel！** 🚀
